(function(){"use strict";var e={2543:function(e,n,o){var t=o(9242),s=o(3396);const r={class:"main-content"};function a(e,n,o,t,a,i){const l=(0,s.up)("Nav"),u=(0,s.up)("RouterView");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{class:"nav-bar"}),(0,s._)("div",r,[(0,s.Wm)(u)])])}const i=e=>((0,s.dD)("data-v-0c888685"),e=e(),(0,s.Cn)(),e),l=i((()=>(0,s._)("h1",null,[(0,s._)("strong",null,"Vue"),(0,s.Uk)(" Chat App")],-1))),u={key:0,class:"login"};function c(e,n,o,r,a,i){const c=(0,s.up)("RouterLink"),d=(0,s.up)("TheNavigation"),g=(0,s.up)("TheAvatar"),p=(0,s.up)("LoginForm");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",null,[(0,s._)("div",null,[(0,s.Wm)(c,{to:"/"},{default:(0,s.w5)((()=>[l])),_:1}),(0,s.Wm)(d),e.isLogin?((0,s.wg)(),(0,s.iD)("div",u,[e.user?.photoURL?((0,s.wg)(),(0,s.j4)(g,{key:0,src:e.user.photoURL},null,8,["src"])):(0,s.kq)("",!0),(0,s._)("button",{class:"text-gray-400 hover:text-white",onClick:n[0]||(n[0]=(...n)=>e.signOut&&e.signOut(...n))}," Sign Out ")])):((0,s.wg)(),(0,s.iD)("button",{key:1,class:"bg-green-500 hover:bg-green-600",onClick:n[1]||(n[1]=(...n)=>e.openSignInModal&&e.openSignInModal(...n))}," Sign in "))])]),((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[e.modalOpen?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"dialog-backdrop",onClick:n[3]||(n[3]=(...n)=>e.closeSignInModal&&e.closeSignInModal(...n))},[(0,s._)("dialog",{class:"modal",open:"",onClick:n[2]||(n[2]=(0,t.iM)((()=>{}),["stop"]))},[(0,s.Wm)(p,{onCloseDialog:e.closeSignInModal},null,8,["onCloseDialog"])])])):(0,s.kq)("",!0)]))],64)}const d=["src"];function g(e,n,o,t,r,a){return(0,s.wg)(),(0,s.iD)("img",{class:"avatar",src:e.avatarSrc},null,8,d)}const p="https://t3.ftcdn.net/jpg/00/64/67/80/360_F_64678017_zUpiZFjj04cnLri7oADnyMH0XBYyQghG.jpg";var m=(0,s.aZ)({name:"TheAvatar",props:{src:{type:String,default:p}},computed:{avatarSrc(){return this.src||p}}}),h=o(89);const v=(0,h.Z)(m,[["render",g],["__scopeId","data-v-16cc8370"]]);var f=v,w=o(7327),y=(o(560),o(4870)),b=o(4233),I=o(2751),_=o(4287);const k={apiKey:"AIzaSyCXvatleolAvHiM7KvlRx6N0PW5HyTwYK0",authDomain:"vue-chat-81b86.firebaseapp.com",projectId:"vue-chat-81b86",storageBucket:"vue-chat-81b86.appspot.com",messagingSenderId:"1064179897888",appId:"1:1064179897888:web:03014049636d596ad20e45",measurementId:"G-77TF20Z8FB"};class S{constructor(){(0,w.Z)(this,"firestore",void 0),I.Z.initializeApp(k),this.firestore=(0,_.ad)()}}var A=new S,L=o(2483),O=o(7139);const Z={class:"container-sm mt-20"},C={class:"mx-5"},D={ref:"bottom",class:"mt-20"},M={class:"bottom"},T={class:"container-sm"},E={type:"submit"};function N(e,n,o,r,a,i){const l=(0,s.up)("TheMessage"),u=(0,s.up)("SendIcon");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Z,[(0,s._)("div",C,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.messages,(({id:n,text:o,userPhotoURL:t,userName:r,userId:a},i)=>((0,s.wg)(),(0,s.j4)(l,{key:n,name:r,"photo-url":t,sender:a===e.user?.uid,"display-name":e.shouldDisplayName(i)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,O.zw)(o),1)])),_:2},1032,["name","photo-url","sender","display-name"])))),128))])]),(0,s._)("div",D,null,512),(0,s._)("div",M,[(0,s._)("div",T,[e.isLogin?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:n[1]||(n[1]=(0,t.iM)(((...n)=>e.send&&e.send(...n)),["prevent"]))},[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":n[0]||(n[0]=n=>e.message=n),placeholder:"Message",required:""},null,512),[[t.nr,e.message]]),(0,s._)("button",E,[(0,s.Wm)(u)])],32)):(0,s.kq)("",!0)])])],64)}const P="messages";class U{constructor(){(0,w.Z)(this,"messages",(0,y.iH)([])),(0,w.Z)(this,"messagesCollection",(0,_.hJ)(A.firestore,P)),(0,w.Z)(this,"messagesQuery",(0,_.IO)(this.messagesCollection,(0,_.Xo)("createdAt","desc"),(0,_.b9)(100))),(0,w.Z)(this,"unsubscribe",(0,_.cf)(this.messagesQuery,(e=>{this.messages.value=this.snapshotProcessing(e)}))),(0,s.Ah)(this.unsubscribe)}async sendMessage(e){const n=Ue.user;if(!n?.value||!Ue.isLogin.value)return;const{photoURL:o,uid:t,displayName:s,email:r}=n.value;await(0,_.ET)((0,_.hJ)(A.firestore,P),{userName:s||r||t,userId:t,userPhotoURL:o,text:e,createdAt:(0,_.Bt)()})}snapshotProcessing(e){return e.docs.map((e=>({id:e.id,...e.data()}))).reverse()}}var W=new U;const j=e=>((0,s.dD)("data-v-4206661f"),e=e(),(0,s.Cn)(),e),R={class:"icon-send hover:text-green-500 hover:text-green-500","aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},x=j((()=>(0,s._)("path",{fill:"currentColor",d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},null,-1))),G=[x];function F(e,n){return(0,s.wg)(),(0,s.iD)("svg",R,G)}const H={},Y=(0,h.Z)(H,[["render",F],["__scopeId","data-v-4206661f"]]);var B=Y;const q={class:"message"},z={key:0};function V(e,n,o,t,r,a){const i=(0,s.up)("TheAvatar");return(0,s.wg)(),(0,s.iD)("div",q,[e.displayName?((0,s.wg)(),(0,s.iD)("span",z,(0,O.zw)(e.name),1)):(0,s.kq)("",!0),(0,s._)("div",{class:(0,O.C_)(["flex",e.sender?"flex-row-reverse":""])},[(0,s.Wm)(i,{class:"mt-1",src:e.photoUrl},null,8,["src"]),(0,s._)("div",{class:(0,O.C_)(["text w-3/4",e.sender?"bg-green-800":"bg-gray-700"])},[(0,s.WI)(e.$slots,"default",{},void 0,!0)],2)],2)])}var K=(0,s.aZ)({name:"TheMessage",components:{TheAvatar:f},props:{name:{type:String,default:""},photoUrl:{type:String,default:""},sender:{type:Boolean,default:!1},displayName:{type:Boolean,default:!0}}});const X=(0,h.Z)(K,[["render",V],["__scopeId","data-v-39ead69c"]]);var J=X,Q=(0,s.aZ)({components:{TheMessage:J,SendIcon:B},methods:{scrollToLastMessage(e){(0,s.Y3)((()=>{e?.value?.scrollIntoView({behavior:"smooth"})}))},shouldDisplayName(e){const n=this.messages[e].userName,o=this.messages[e-1]?.userName;return n!==o}},setup(){const e=W.messages,n=W.sendMessage,o=(0,y.iH)(null);(0,s.bv)((()=>{o.value=document.querySelector(".bottom")})),(0,s.YP)(e,(()=>{(0,s.Y3)((()=>{o?.value?.scrollIntoView({behavior:"smooth"})}))}),{deep:!0});const t=(0,y.iH)(""),r=()=>{n(t.value),t.value=""};return{user:Ue.user,isLogin:Ue.isLogin,messages:e,bottom:o,message:t,send:r}}});const $=(0,h.Z)(Q,[["render",N],["__scopeId","data-v-f7f3d2ba"]]);var ee=$;const ne=e=>((0,s.dD)("data-v-5d85ce1e"),e=e(),(0,s.Cn)(),e),oe=ne((()=>(0,s._)("h2",null,"Register",-1))),te=ne((()=>(0,s._)("button",{type:"submit"},"Register",-1)));function se(e,n,o,r,a,i){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[oe,(0,s._)("form",{class:"form",onSubmit:n[2]||(n[2]=(0,t.iM)(((...n)=>e.register&&e.register(...n)),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"email",placeholder:"Email address...","onUpdate:modelValue":n[0]||(n[0]=n=>e.email=n)},null,512),[[t.nr,e.email]]),(0,s.wy)((0,s._)("input",{type:"password",placeholder:"password...","onUpdate:modelValue":n[1]||(n[1]=n=>e.password=n)},null,512),[[t.nr,e.password]]),te,(0,s._)("p",null,[(0,s.Uk)("Do you already have an account? Go to "),(0,s.Wm)(l,{to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Login Page")])),_:1})])],32)],64)}var re=(0,s.aZ)({data(){return{email:"",password:""}},methods:{register(){Ue.createUserWithEmailAndPassword(this.email,this.password).then((e=>{console.log("userCredential",e)})).catch((e=>{const n=e.code,o=e.message;console.log(n,o)}))}}});const ae=(0,h.Z)(re,[["render",se],["__scopeId","data-v-5d85ce1e"]]);var ie=ae;function le(e,n,o,t,r,a){const i=(0,s.up)("LoginForm");return(0,s.wg)(),(0,s.j4)(i)}const ue=(0,s._)("h2",null,"Login",-1);function ce(e,n,o,t,r,a){const i=(0,s.up)("EmailPasswordSignIn"),l=(0,s.up)("router-link"),u=(0,s.up)("AnonymousSignIn"),c=(0,s.up)("GoogleSignIn");return(0,s.wg)(),(0,s.iD)(s.HY,null,[ue,(0,s.Wm)(i),(0,s._)("p",null,[(0,s.Wm)(l,{to:"/register",onClick:n[0]||(n[0]=n=>e.$emit("closeDialog"))},{default:(0,s.w5)((()=>[(0,s.Uk)(" Sign up ")])),_:1}),(0,s.Uk)(" if you don't have an account ")]),(0,s._)("p",null,[(0,s.Uk)(" Or login anonimously "),(0,s.Wm)(u)]),(0,s.Wm)(c)],64)}const de=(0,s._)("button",{type:"submit"},"Log in",-1);function ge(e,n,o,r,a,i){return(0,s.wg)(),(0,s.iD)("form",{class:"form",onSubmit:n[2]||(n[2]=(0,t.iM)(((...n)=>e.loginWithEmailAndPassword&&e.loginWithEmailAndPassword(...n)),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"email",placeholder:"Email address...","onUpdate:modelValue":n[0]||(n[0]=n=>e.email=n)},null,512),[[t.nr,e.email]]),(0,s.wy)((0,s._)("input",{type:"password",placeholder:"password...","onUpdate:modelValue":n[1]||(n[1]=n=>e.password=n)},null,512),[[t.nr,e.password]]),de],32)}var pe=(0,s.aZ)({name:"EmailPasswordSignIn",data(){return{email:"",password:""}},methods:{loginWithEmailAndPassword(){Ue.signInWithEmailAndPassword(this.email,this.password).then((e=>{console.log("userCredential",e)})).catch((e=>{const n=e.code,o=e.message;console.log(n,o)}))}}});const me=(0,h.Z)(pe,[["render",ge]]);var he=me;function ve(e,n,o,t,r,a){return(0,s.wg)(),(0,s.iD)("button",{onClick:n[0]||(n[0]=(...n)=>e.signInWithGmail&&e.signInWithGmail(...n))},"Sign in with Google")}var fe=(0,s.aZ)({name:"GoogleSignIn",methods:{signInWithGmail(){Ue.signInWithGoogle()}}});const we=(0,h.Z)(fe,[["render",ve]]);var ye=we;function be(e,n,o,t,r,a){return(0,s.wg)(),(0,s.iD)("button",{onClick:n[0]||(n[0]=(...n)=>e.signInAnonymously&&e.signInAnonymously(...n))},"Log In Anonimously")}var Ie=(0,s.aZ)({name:"AnonymousSignIn",methods:{signInAnonymously(){Ue.signInAnonymously()}}});const _e=(0,h.Z)(Ie,[["render",be]]);var ke=_e,Se=(0,s.aZ)({name:"LoginForm",components:{EmailPasswordSignIn:he,GoogleSignIn:ye,AnonymousSignIn:ke},emits:["closeDialog"]});const Ae=(0,h.Z)(Se,[["render",ce]]);var Le=Ae,Oe=(0,s.aZ)({components:{LoginForm:Le}});const Ze=(0,h.Z)(Oe,[["render",le],["__scopeId","data-v-6328b3b5"]]);var Ce,De=Ze;function Me(e,n,o){Ue.isLogin.value?o("/"):o()}(function(e){e["MAIN"]="/",e["MAP"]="/map",e["LOGIN"]="/login",e["REGISTER"]="/register"})(Ce||(Ce={}));const Te=[{path:Ce.MAIN,name:"chat",component:ee},{path:Ce.MAP,name:"map",component:()=>o.e(842).then(o.bind(o,2304))},{path:Ce.LOGIN,name:"login",beforeEnter:[Me],component:()=>De},{path:Ce.REGISTER,name:"register",beforeEnter:[Me],component:()=>ie}],Ee=(0,L.p7)({history:(0,L.r5)(),routes:Te});var Ne=Ee;class Pe{constructor(){(0,w.Z)(this,"auth",(0,b.v0)()),(0,w.Z)(this,"user",(0,y.iH)(null)),(0,w.Z)(this,"unsubscribe",(0,b.Aj)(this.auth,(e=>{this.user.value=e;const n=Ne.currentRoute.value;Ne.push("/").then((()=>{Ne.push(n)})),console.log("_user",e)}))),(0,s.Ah)(this.unsubscribe)}get isLogin(){return(0,s.Fl)((()=>null!==this.user.value))}async signInWithGoogle(){const e=new b.hJ;await(0,b.rh)(this.auth,e)}async createUserWithEmailAndPassword(e,n){return(0,b.Xb)(this.auth,e,n)}async signInWithEmailAndPassword(e,n){return(0,b.e5)(this.auth,e,n)}async signInAnonymously(){return(0,b.XB)(this.auth)}async signOut(){await(0,b.w7)(this.auth)}}var Ue=new Pe;const We=e=>((0,s.dD)("data-v-0860694d"),e=e(),(0,s.Cn)(),e),je={class:"dropdown"},Re=We((()=>(0,s._)("button",{class:"dropbtn"},"Dropdown",-1))),xe={class:"dropdown-content"};function Ge(e,n,o,t,r,a){const i=(0,s.up)("RouterLink");return(0,s.wg)(),(0,s.iD)("div",je,[Re,(0,s._)("div",xe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.ROUTES,(e=>((0,s.wg)(),(0,s.j4)(i,{to:e.path},{default:(0,s.w5)((()=>[(0,s.Uk)((0,O.zw)(e.name),1)])),_:2},1032,["to"])))),256))])])}const Fe=[{name:"Home",path:Ce.MAIN},{name:"Map",path:Ce.MAP},{name:"Contact",path:Ce.LOGIN},{name:"Sign in",path:Ce.REGISTER}];var He=(0,s.aZ)({name:"TheNavigation",components:{TheAvatar:f,LoginForm:Le},data(){return{modalOpen:!1,ROUTES:Fe}},computed:{isLogin(){return Ue.isLogin?.value},user(){return Ue.user?.value}},methods:{openSignInModal(){this.modalOpen=!0},closeSignInModal(){this.modalOpen=!1},signOut(){Ue.signOut()}}});const Ye=(0,h.Z)(He,[["render",Ge],["__scopeId","data-v-0860694d"]]);var Be=Ye,qe=(0,s.aZ)({name:"TheNav",components:{TheAvatar:f,LoginForm:Le,TheNavigation:Be},data(){return{modalOpen:!1,ROUTS:Ce}},computed:{isLogin(){return Ue.isLogin?.value},user(){return Ue.user?.value}},methods:{openSignInModal(){this.modalOpen=!0},closeSignInModal(){this.modalOpen=!1},signOut(){Ue.signOut()}}});const ze=(0,h.Z)(qe,[["render",c],["__scopeId","data-v-0c888685"]]);var Ve=ze,Ke=(0,s.aZ)({name:"App",components:{Nav:Ve,Chat:ee}});const Xe=(0,h.Z)(Ke,[["render",a],["__scopeId","data-v-7dcd938d"]]);var Je=Xe,Qe=o(5431);(0,Qe.z)("/tinder.github.io/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var $e=o(4582);(0,t.ri)(Je).use(Ne).use($e.ZP,{load:{key:"AIzaSyCUoAC4ugfopIxNmy1KiqdxDpMHhdTtx74"}}).mount("#app")}},n={};function o(t){var s=n[t];if(void 0!==s)return s.exports;var r=n[t]={exports:{}};return e[t].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(n,t,s,r){if(!t){var a=1/0;for(c=0;c<e.length;c++){t=e[c][0],s=e[c][1],r=e[c][2];for(var i=!0,l=0;l<t.length;l++)(!1&r||a>=r)&&Object.keys(o.O).every((function(e){return o.O[e](t[l])}))?t.splice(l--,1):(i=!1,r<a&&(a=r));if(i){e.splice(c--,1);var u=s();void 0!==u&&(n=u)}}return n}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[t,s,r]}}(),function(){o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,{a:n}),n}}(),function(){o.d=function(e,n){for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(n,t){return o.f[t](e,n),n}),[]))}}(),function(){o.u=function(e){return"js/map.ea63a6dd.js"}}(),function(){o.miniCssF=function(e){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={},n="tinder:";o.l=function(t,s,r,a){if(e[t])e[t].push(s);else{var i,l;if(void 0!==r)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==t||d.getAttribute("data-webpack")==n+r){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",n+r),i.src=t),e[t]=[s];var g=function(n,o){i.onerror=i.onload=null,clearTimeout(p);var s=e[t];if(delete e[t],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach((function(e){return e(o)})),n)return n(o)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=g.bind(null,i.onerror),i.onload=g.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/tinder.github.io/"}(),function(){var e={143:0};o.f.j=function(n,t){var s=o.o(e,n)?e[n]:void 0;if(0!==s)if(s)t.push(s[2]);else{var r=new Promise((function(o,t){s=e[n]=[o,t]}));t.push(s[2]=r);var a=o.p+o.u(n),i=new Error,l=function(t){if(o.o(e,n)&&(s=e[n],0!==s&&(e[n]=void 0),s)){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;i.message="Loading chunk "+n+" failed.\n("+r+": "+a+")",i.name="ChunkLoadError",i.type=r,i.request=a,s[1](i)}};o.l(a,l,"chunk-"+n,n)}},o.O.j=function(n){return 0===e[n]};var n=function(n,t){var s,r,a=t[0],i=t[1],l=t[2],u=0;if(a.some((function(n){return 0!==e[n]}))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(l)var c=l(o)}for(n&&n(t);u<a.length;u++)r=a[u],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},t=self["webpackChunktinder"]=self["webpackChunktinder"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=o.O(void 0,[998],(function(){return o(2543)}));t=o.O(t)})();
//# sourceMappingURL=app.b057de36.js.map